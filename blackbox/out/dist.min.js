"use strict";var __extends=this&&this.__extends||function(){var B=function(s,l){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(c[u]=a[u])},B(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");B(s,l);function c(){this.constructor=s}s.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();define("utils/BlackBoxChecker",["require","exports"],function(B,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBoxChecker=void 0;var l=function(){function c(){}return c.isLowerAlphabet=function(a){return/^[a-z]$/.test(a)},c.isUpperAlphabet=function(a){return/^[A-Z]$/.test(a)},c.isClassicDigit=function(a){return/^[0-9]$/.test(a)},c.isNonLetterDigitSpace=function(a){return!/^([a-zA-Z0-9]|\s)$/.test(a)},c.isPositiveIntegerWithNoLeadingZeroes=function(a){return/^[1-9][0-9]*$/.test(a)},c.isNonNegativeIntegerWithNoLeadingZeroes=function(a){return a=="0"||this.isPositiveIntegerWithNoLeadingZeroes(a)},c.hasRequiredStructure=function(a,u,o,i,t,r,e,n){if(a.length<u||a.length>o)return!1;for(var f=0;f<a.length;f++){var h=a.charAt(f);if(!i&&this.isLowerAlphabet(h)||!t&&this.isUpperAlphabet(h)||!r&&/\s/.test(h)||!e&&this.isClassicDigit(h)||!n&&this.isNonLetterDigitSpace(h))return!1}return!0},c}();s.BlackBoxChecker=l}),define("utils/Random",["require","exports"],function(B,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Random=void 0;var l=function(){function c(a){this.seed=(a??new Date().getTime())||0}return c.prototype.nextInt=function(a){return this.seed=this.seed*1103515245+12345&2147483647,this.seed%a},c}();s.Random=l}),define("utils/BlackBoxGen",["require","exports","utils/Random"],function(B,s,l){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBoxGen=void 0;var c=function(){function a(){}return a.genRandPerm=function(u,o){for(var i=new l.Random,t=0;t<u;t++){var r=i.nextInt(u),e=o[t];o[t]=o[r],o[r]=e}},a.permString=function(u,o){for(var i=u==0?new l.Random:new l.Random(u),t=o.length,r=o.split(""),e=o.length-1;e>=0;e--){var n=i.nextInt(e+1),f=r[e];r[e]=r[n],r[n]=f}return r.join("")},a.make=function(){for(var u="",o=0;o<10;o++)u+=o;for(var o=0;o<26;o++)u+=String.fromCharCode("a".charCodeAt(0)+o);return u+=" +-*/<>",u=this.permString(1,u),u},a.getP=function(u){var o=new l.Random(17*u+23),i=this.make();i=i.replace(/[/*\-+>< ]/g,"");for(var t="",r=0;r<6;r++)t+=i.charAt(o.nextInt(36));return t},a.enc=function(u){for(var o=this.make(),i=91,t=32,r="",e=0;e<u.length;e++){var n=u.charCodeAt(e)-t+e%i+o.charCodeAt(e%o.length);n=(n%i+i)%i,r+=String.fromCharCode(n+t)}return r},a.dec=function(u){for(var o=this.make(),i=91,t=32,r="",e=0;e<u.length;e++){var n=u.charCodeAt(e)-t,f=n-e%i-o.charCodeAt(e%o.length);f=(f%i+i)%i,r+=String.fromCharCode(f+t)}return r},a.genCode=function(u,o){for(var i="",t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)i+=String.fromCharCode(t);for(var t="0".charCodeAt(0);t<="9".charCodeAt(0);t++)i+=String.fromCharCode(t);for(var r=new l.Random,e="",n=0;n<u;n++)e+=i.charAt(r.nextInt(i.length));return e},a}();s.BlackBoxGen=c}),define("games/BlackBoxBase",["require","exports"],function(B,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBoxBase=void 0;var l="UNETI STRING NIJE VALIDAN",c="RESTART",a="BRAVO! SIFRA ZA SLEDECU IGRU JE ",u=" A KOD ZA OVU IGRU JE ",o="POGRESNA SIFRA!",i=function(){function t(r,e,n){this.gameIndex=r,this.password=e,this.nextGamePassword=n,this.gameId=0,this.gameName="",this.gameDescription="",this.gameInstructions="",this.solution="",this.gameCode="",this.returnGameCode=!1,this.lastGameMessage="",this.lastGame=!1,this.gameOver=!1,this.inputs=[]}return t.prototype.restartGame=function(){this.inputs.length=0,this.gameOver=!1,this.init()},t.prototype.checkPassword=function(r){return r==this.password},t.prototype.currInputIndex=function(){return this.inputs.length+1},t.prototype.isRestarted=function(){return this.inputs.length==0},t.prototype.interact=function(r){if(r=="RESTART")return this.restartGame(),"";if(!this.checkGlobalConstraints(r))return l;var e=this.answer(r);return this.inputs.push(r),e},t.prototype.finalAnswer=function(){return this.lastGame?this.lastGameMessage:this.returnGameCode?a+this.nextGamePassword+u+this.gameCode:a+this.nextGamePassword},t}();s.BlackBoxBase=i}),define("games/BlackBox001",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","games/BlackBoxBase"],function(B,s,l,c,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox001=void 0;var u=function(o){__extends(i,o);function i(t,r,e){var n=o.call(this,t,r,e)||this;return n.gameId=1,n.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",n.solution=c.BlackBoxGen.dec("?=6'?75Mo_v>"),n}return i.prototype.init=function(){},i.prototype.checkGlobalConstraints=function(t){return l.BlackBoxChecker.hasRequiredStructure(t,1,20,!0,!1,!1,!0,!1)},i.prototype.answer=function(t){return this.solution==t?(this.gameOver=!0,this.finalAnswer()):this.solution.indexOf(t)!=-1?"da":"ne"},i}(a.BlackBoxBase);s.BlackBox001=u}),define("games/BlackBox002",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","games/BlackBoxBase"],function(B,s,l,c,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox002=void 0;var u=function(o){__extends(i,o);function i(t,r,e){var n=o.call(this,t,r,e)||this;return n.gameId=2,n.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",n.target=Number(c.BlackBoxGen.dec("^eQTjUNOv`HlesxQd")),n.solution=c.BlackBoxGen.dec("`cTPeVNLpZEj]w!M"),n.calcLimit=1e9,n}return i.prototype.init=function(){},i.prototype.checkGlobalConstraints=function(t){return l.BlackBoxChecker.hasRequiredStructure(t,1,20,!0,!1,!1,!0,!1)},i.prototype.answer=function(t){if(this.solution==t)return this.gameOver=!0,this.finalAnswer();if(!l.BlackBoxChecker.isPositiveIntegerWithNoLeadingZeroes(t))return"prihvatam samo prirodne brojeve manje od 10^20";var r=Number(t);if(r<=this.calcLimit){var e=this.F(r);return e!=-1?String(e):"uf, ne znam ovo"}return r<this.target||r>this.target?"ne\u0107u da ti kazem, ali probaj ve\u0107i broj":"\u0161ta bih ti ja odgovorio da me pita\u0161 za ovaj broj"},i.prototype.F=function(t){var r=String(t||0),e=r.length;if(e%2==0)return-1;var n=Number(r.charAt((e-1)/2));return n==0?-1:Math.floor(t/n)},i}(a.BlackBoxBase);s.BlackBox002=u}),define("utils/BlackBoxUtils",["require","exports"],function(B,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBoxUtils=void 0;var l=function(){function c(){}return c.count=function(a,u){for(var o=0,i=0;i<a.length;i++)a.charAt(i)==u&&o++;return o},c.swapChars=function(a,u,o){var i=a.split(""),t=i[u];return i[u]=i[o],i[o]=t,i.join("")},c}();s.BlackBoxUtils=l}),define("games/BlackBox003",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","utils/BlackBoxUtils","games/BlackBoxBase"],function(B,s,l,c,a,u){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox003=void 0;var o=function(i){__extends(t,i);function t(r,e,n){var f=i.call(this,r,e,n)||this;return f.gameId=3,f.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",f.solution=c.BlackBoxGen.dec("A9$%=)3"),f}return t.prototype.init=function(){},t.prototype.checkGlobalConstraints=function(r){return l.BlackBoxChecker.hasRequiredStructure(r,1,20,!0,!1,!1,!0,!1)},t.prototype.answer=function(r){if(this.solution==r)return this.gameOver=!0,this.finalAnswer();var e=[];if(this.C1(r)||e.push(1),this.C2(r)||e.push(2),this.C3(r)||e.push(3),this.C4(r)||e.push(4),this.C5(r)||e.push(5),this.C6(r)||e.push(6),e.length>0){for(var n="nisu ispunjeni uslovi: ",f=0;f<e.length;f++)n+=e[f],f<e.length-1&&(n+=", ");return n}return"jo\u0161 samo malo"},t.prototype.C1=function(r){return r.length==7},t.prototype.C2=function(r){for(var e=0;e<r.length;e++)if(r.charAt(e)!=r.charAt(r.length-1-e))return!1;return!0},t.prototype.C3=function(r){return a.BlackBoxUtils.count(r,"a")>=2},t.prototype.C4=function(r){return a.BlackBoxUtils.count(r,"e")>=1},t.prototype.C5=function(r){return a.BlackBoxUtils.count(r,"r")>=2},t.prototype.C6=function(r){return a.BlackBoxUtils.count(r,"c")>=2},t}(u.BlackBoxBase);s.BlackBox003=o}),define("games/BlackBox004",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","games/BlackBoxBase"],function(B,s,l,c,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox004=void 0;var u=function(o){__extends(i,o);function i(t,r,e){var n=o.call(this,t,r,e)||this;return n.gameId=4,n.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",n.solution=c.BlackBoxGen.dec(">L6.L*0"),n}return i.prototype.init=function(){},i.prototype.checkGlobalConstraints=function(t){return l.BlackBoxChecker.hasRequiredStructure(t,1,20,!0,!1,!1,!0,!1)},i.prototype.answer=function(t){if(this.solution==t)return this.gameOver=!0,this.finalAnswer();for(var r=this.solution,e=t.split("").reverse().join(""),n=0,f=0;f<Math.max(r.length,e.length);f++){var h=27,m=27;f<r.length&&(h=r.charCodeAt(f)-96,(h<1||h>36)&&(h=30)),f<e.length&&(m=e.charCodeAt(f)-96,(m<1||m>36)&&(m=30)),n+=Math.abs(h-m)}return String(n)},i}(a.BlackBoxBase);s.BlackBox004=u}),define("games/BlackBox005",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","games/BlackBoxBase"],function(B,s,l,c,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox005=void 0;var u=function(o){__extends(i,o);function i(t,r,e){var n=o.call(this,t,r,e)||this;n.a=3,n.b=22,n.dx=[0,1,0,-1],n.dy=[1,0,-1,0],n.gameId=5,n.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",n.solution=c.BlackBoxGen.dec("I:3/D");var f=c.BlackBoxGen.dec(`MV?>XF?>mK6YOfj?PRY>FOhUFtN*Pxtrx'WV\\a-q]cb(1ji3!ut=va4*6:u+")tqzC%qO)U HDBSR'171XA"(2S\\ED^L:9hQ<_JapEVBIDLUn[AoTu@szx#-RQbQxlX^]#!eo.wpo8!\\$%<@evx$owu3 l?tEkCJ=CM"!'!H<(#"NW@?Y<5?cL7ZPg\`5QHD4GPiVGjD FnusnxXLRW#gHNXy'\`_)rkj3lW*p,;k!so_rp.&rEzKq3:CIS('"wN,s)(IR0/TB0/^G2UKW[;A8J:BKYF7e?k6^ectsHGMGnWCTSirfe$mfZ#r]uk'+[lcuemk)qb5jFa.539Csrxr>'nts9B+*D2+*N7"E;RV+<3:*2;TA2\`:f1Y\`^`);n.n=8,n.m=47,n.init(),n.mc=[];for(var h=0;h<n.n;h++)n.mc.push(Array(n.m));for(var h=0;h<f.length;h++)n.mc[Math.floor(h/n.m)][h%n.m]=f.charAt(h);return n}return i.prototype.init=function(){this.a=3,this.b=22},i.prototype.checkGlobalConstraints=function(t){return l.BlackBoxChecker.hasRequiredStructure(t,1,20,!0,!1,!1,!0,!1)},i.prototype.answer=function(t){if(this.solution==t)return this.gameOver=!0,this.finalAnswer();var r=t.charAt(0);if(r!="l"&&r!="r"&&r!="u"&&r!="d")return"ne razumem";var e={r:0,d:1,l:2,u:3}[r];return this.ok(this.a+this.dx[e],this.b+this.dy[e])?(this.a+=this.dx[e],this.b+=this.dy[e],this.mc[this.a][this.b]="*",this.mc.map(function(n){return n.join("")}).join(`
`)):"jao!"},i.prototype.ok=function(t,r){return!(t<0||t>=this.n||r<0||r>=this.m||this.mc[t][r]==".")},i}(a.BlackBoxBase);s.BlackBox005=u}),define("games/BlackBox006",["require","exports","utils/BlackBoxChecker","utils/BlackBoxGen","games/BlackBoxBase"],function(B,s,l,c,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox006=void 0;var u=function(o){__extends(i,o);function i(t,r,e){var n=o.call(this,t,r,e)||this;return n.activeInd=-1,n.currLet=0,n.gameId=6,n.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",n.solution=c.BlackBoxGen.dec("^kPOn[NLrY"),n.arr=c.BlackBoxGen.dec(`TfLLjWSLv]Eo]u!RcYaNWa#jS/\\3W()',6lfok/wekd,9" 9$zxB(v?/CIw4,4x(0E2%S3[*MUPV_=7@5[D5:=^aJOcWLIsZAf\`o GZTYNSYy]V*^.My&(,3ebkc,w]bc(6ry7"zy;)o8+EBt.%(x&.F4 R&X%IUPYa7.:7WA26/Y\\FEbQBCkS<_TmvDTKXBMYqXP"U)Qy!"!,^Ze](qV[^(-ss0vnp8'f4*9?t&u!tz$A,xO(MsIPKNU2.3)T=++*L]AAZIE<fN9_Qfj?VHO=JThUFwP Dpyyy)^Tc\\'eVXY`),n.list=c.BlackBoxGen.dec("3=4%N7$)J?xIZJ^0<RE:)D^F8d9*,[[a_rMAgFhb5cIifQ_f^u_&aVzk,xu`]a]T").split("."),n}return i.prototype.init=function(){this.activeInd=-1,this.currLet=0},i.prototype.checkGlobalConstraints=function(t){return l.BlackBoxChecker.hasRequiredStructure(t,1,20,!0,!1,!1,!0,!1)},i.prototype.answer=function(t){if(this.solution==t)return this.gameOver=!0,this.finalAnswer();if(this.activeInd!=-1)return t.length!=1||!l.BlackBoxChecker.isLowerAlphabet(t.charAt(0))?(this.init(),"ne valja, ispo\u010Detka"):t.charAt(0)!=this.list[this.activeInd].charAt(this.currLet)?(this.init(),"ne valja, ispo\u010Detka"):this.currLet!=this.list[this.activeInd].length-1?(this.currLet++,this.list[this.activeInd].charAt(this.currLet)):(this.init(),"kraj");if(l.BlackBoxChecker.isNonNegativeIntegerWithNoLeadingZeroes(t)){var r=Number(t);return r<301?r==0?"niz po\u010Dinje od prvog elementa":this.arr.charAt(r):"zaklju\u010Di sam"}if(t.length>1)return"ubi me preduga re\u010D";for(var e=0;e<this.list.length;e++)if(this.list[e].charAt(0)==t.charAt(0)){this.activeInd=e;break}return this.activeInd==-1?"nema ni\u0161ta ovde":this.list[this.activeInd].length>1?(this.currLet=1,this.list[this.activeInd].charAt(this.currLet)):(this.init(),"kraj")},i}(a.BlackBoxBase);s.BlackBox006=u}),define("games/BlackBox007",["require","exports","utils/BlackBoxChecker","games/BlackBoxBase"],function(B,s,l,c){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BlackBox007=void 0;var a=function(u){__extends(o,u);function o(i,t,r){var e=u.call(this,i,t,r)||this;return e.curNum=1,e.curSum=0,e.curLen=0,e.gameId=7,e.gameInstructions="Uneti string mora biti du\u017Eine izme\u0111u 1 i 20, uklju\u010Divo, i sme se sastojati samo od karaktera 'a'-'z' i '0'-'9'",e.targetSum=54321,e.targetLen=6,e}return o.prototype.init=function(){this.curNum=1,this.curSum=0,this.curLen=0},o.prototype.checkGlobalConstraints=function(i){return l.BlackBoxChecker.hasRequiredStructure(i,1,20,!0,!1,!1,!0,!1)},o.prototype.answer=function(i){if(!l.BlackBoxChecker.isNonNegativeIntegerWithNoLeadingZeroes(i))return this.init(),"ne valja";var t=Number(i);return t<=this.curNum?(this.init(),"ne valja"):t%this.curNum!=0?(this.init(),"ne valja"):(this.curSum+=t,this.curNum=t,this.curLen++,this.curSum>this.targetSum?(this.init(),"ne valja, prekora\u010Dena suma 54321"):this.curSum<this.targetSum?"ok":this.curLen<this.targetLen?(this.init(),"ne valja, premalo elemenata"):this.curLen>this.targetLen?(this.init(),"ne valja, previ\u0161e elemenata"):(this.gameOver=!0,this.finalAnswer()))},o}(c.BlackBoxBase);s.BlackBox007=a}),define("ui/UI",["require","exports","games/BlackBox001","games/BlackBox002","games/BlackBox003","games/BlackBox004","games/BlackBox005","games/BlackBox006","games/BlackBox007","utils/BlackBoxChecker","utils/BlackBoxGen"],function(B,s,l,c,a,u,o,i,t,r,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.UI=void 0;var n=function(){function f(){var h=this;this.games=[],this.curInput="",this.curGame=null,this.realContent="",this.blinky=!1,this.games=[new l.BlackBox001(1,e.BlackBoxGen.getP(1),e.BlackBoxGen.getP(2)),new c.BlackBox002(2,e.BlackBoxGen.getP(2),e.BlackBoxGen.getP(3)),new a.BlackBox003(3,e.BlackBoxGen.getP(3),e.BlackBoxGen.getP(4)),new u.BlackBox004(4,e.BlackBoxGen.getP(4),e.BlackBoxGen.getP(5)),new o.BlackBox005(5,e.BlackBoxGen.getP(5),e.BlackBoxGen.getP(6)),new i.BlackBox006(6,e.BlackBoxGen.getP(6),e.BlackBoxGen.getP(7)),new t.BlackBox007(7,e.BlackBoxGen.getP(7),e.BlackBoxGen.getP(8))],setInterval(function(){h.blinky=!h.blinky,h.print("")},500),this.games[this.games.length-1].lastGame=!0,this.games[this.games.length-1].lastGameMessage="\u010Cestitamo! Re\u0161ili ste sve igre!",this.boxSelect=document.getElementById("boxSelect"),this.boxPassword=document.getElementById("boxPassword"),this.outputScreen=document.getElementById("output"),this.printLine("UNESITE \u0160IFRU CRNE KUTIJE."),this.printLine("\u0160IFRA ZA PRVU KUTIJU JE "+e.BlackBoxGen.getP(1)),this.printLine("\u0160IFRU ZA SVAKU NAREDNU KUTIJU DOBIJATE RE\u0160AVANJEM PRETHODNE")}return f.prototype.startBlackBox=function(){var h=Number(this.boxSelect.value)-1,m=this.games[h];if(m){if(!m.checkPassword(this.boxPassword.value)){this.printLine("POGRE\u0160NA SIFRA!");return}this.curGame=m,this.curGame.restartGame(),this.clearScreen(),this.printLine("PO\u010CINJE CRNA KUTIJA "+this.curGame.gameId),this.printLine(this.curGame.gameInstructions),this.printLine("---------------------------"),this.print("> ")}},f.prototype.keyDown=function(h){if(this.curGame!=null&&h=="Backspace"){if(this.curInput=="")return;this.curInput=this.curInput.slice(0,this.curInput.length-1),this.realContent=this.realContent.slice(0,this.realContent.length-1),this.outputScreen.textContent=this.realContent+this.suffix()}},f.prototype.suffix=function(){return this.curGame!=null&&this.blinky?"_":""},f.prototype.keyPress=function(h){this.curGame!=null&&(h=="Enter"?(this.printLine(""),this.curInput!=""&&this.processInput(this.curInput),this.curInput=""):h.length==1&&(this.curInput+=h,this.print(h)))},f.prototype.printLine=function(h){this.print(h+`
`)},f.prototype.print=function(h){this.realContent+=h,this.outputScreen.textContent=this.realContent+this.suffix(),this.outputScreen.scrollBy(0,1e4)},f.prototype.clearScreen=function(){this.realContent="",this.outputScreen.textContent=this.realContent+this.suffix()},f.prototype.processInput=function(h){if(this.curGame!=null){var m=this.curGame.interact(h);this.printLine(m),this.curGame.gameOver?(this.curGame=null,this.print("")):this.print("> ")}},f.prototype.paste=function(h){for(var m=0;m<h.length;m++)r.BlackBoxChecker.isNonLetterDigitSpace(h.charAt(m))||this.keyPress(h.charAt(m))},f}();s.UI=n});
